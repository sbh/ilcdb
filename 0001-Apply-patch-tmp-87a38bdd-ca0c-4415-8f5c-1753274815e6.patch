From b1c501f154df804c1cdd96f3119e2945da26e0a7 Mon Sep 17 00:00:00 2001
From: "google-labs-jules[bot]"
 <161369871+google-labs-jules[bot]@users.noreply.github.com>
Date: Mon, 22 Sep 2025 17:39:52 +0000
Subject: [PATCH] Apply patch /tmp/87a38bdd-ca0c-4415-8f5c-1753274815e6.patch

---
 build.gradle                                  | 60 +++++++++---------
 gradle.properties                             |  5 +-
 gradle/wrapper/gradle-wrapper.properties      |  2 +-
 grails-4.1.1-upgrade.patch                    |  0
 grails-app/conf/Config.groovy                 | 23 +------
 .../net/skytrail/ilcdb/domain/AMI.groovy      |  1 +
 .../net/skytrail/ilcdb/domain/Address.groovy  | 26 +-------
 .../skytrail/ilcdb/domain/Appointment.groovy  | 20 ++++++
 .../skytrail/ilcdb/domain/BirthPlace.groovy   | 40 ++++++++++++
 .../skytrail/ilcdb/domain/CaseResult.groovy   | 26 ++++++++
 .../net/skytrail/ilcdb/domain/CaseType.groovy | 31 ++++++++++
 .../net/skytrail/ilcdb/domain/Client.groovy   | 26 +-------
 .../skytrail/ilcdb/domain/ClientCase.groovy   | 26 +-------
 .../ilcdb/domain/ClientSponsorRelation.groovy | 13 ++++
 .../net/skytrail/ilcdb/domain/Conflict.groovy | 35 +++++++++++
 .../net/skytrail/ilcdb/domain/Country.groovy  | 13 ++++
 .../net/skytrail/ilcdb/domain/Note.groovy     | 26 +-------
 .../net/skytrail/ilcdb/domain/Person.groovy   | 27 +-------
 .../skytrail/ilcdb/domain/Requestmap.groovy   | 22 +++++++
 .../net/skytrail/ilcdb/domain/Role.groovy     | 26 +-------
 .../ilcdb/domain/ServiceRecord.groovy         | 41 ++++++++++++
 .../net/skytrail/ilcdb/domain/Sponsor.groovy  | 34 ++++++++++
 .../ilcdb/domain/StatusAchieved.groovy        | 27 +-------
 .../skytrail/ilcdb/domain/StatusType.groovy   | 15 +++++
 .../net/skytrail/ilcdb/domain/User.groovy     |  5 +-
 .../net/skytrail/ilcdb/domain/UserRole.groovy |  5 +-
 .../skytrail/ilcdb/domain/Appointment.groovy  | 40 ------------
 .../skytrail/ilcdb/domain/BirthPlace.groovy   | 60 ------------------
 .../skytrail/ilcdb/domain/CaseResult.groovy   | 46 --------------
 .../net/skytrail/ilcdb/domain/CaseType.groovy | 51 ---------------
 .../ilcdb/domain/ClientSponsorRelation.groovy | 33 ----------
 .../net/skytrail/ilcdb/domain/Conflict.groovy | 55 ----------------
 .../net/skytrail/ilcdb/domain/Country.groovy  | 33 ----------
 .../skytrail/ilcdb/domain/Requestmap.groovy   | 42 -------------
 .../ilcdb/domain/ServiceRecord.groovy         | 62 -------------------
 .../net/skytrail/ilcdb/domain/Sponsor.groovy  | 54 ----------------
 .../skytrail/ilcdb/domain/StatusType.groovy   | 36 -----------
 .../ilcdb/service/ClientService.groovy        |  2 +-
 38 files changed, 351 insertions(+), 738 deletions(-)
 create mode 100644 grails-4.1.1-upgrade.patch
 rename {src/main/groovy => grails-app/domain}/net/skytrail/ilcdb/domain/AMI.groovy (99%)
 rename {src/main/groovy => grails-app/domain}/net/skytrail/ilcdb/domain/Address.groovy (62%)
 create mode 100644 grails-app/domain/net/skytrail/ilcdb/domain/Appointment.groovy
 create mode 100644 grails-app/domain/net/skytrail/ilcdb/domain/BirthPlace.groovy
 create mode 100644 grails-app/domain/net/skytrail/ilcdb/domain/CaseResult.groovy
 create mode 100644 grails-app/domain/net/skytrail/ilcdb/domain/CaseType.groovy
 rename {src/main/groovy => grails-app/domain}/net/skytrail/ilcdb/domain/Client.groovy (96%)
 rename {src/main/groovy => grails-app/domain}/net/skytrail/ilcdb/domain/ClientCase.groovy (81%)
 create mode 100644 grails-app/domain/net/skytrail/ilcdb/domain/ClientSponsorRelation.groovy
 create mode 100644 grails-app/domain/net/skytrail/ilcdb/domain/Conflict.groovy
 create mode 100644 grails-app/domain/net/skytrail/ilcdb/domain/Country.groovy
 rename {src/main/groovy => grails-app/domain}/net/skytrail/ilcdb/domain/Note.groovy (59%)
 rename {src/main/groovy => grails-app/domain}/net/skytrail/ilcdb/domain/Person.groovy (74%)
 create mode 100644 grails-app/domain/net/skytrail/ilcdb/domain/Requestmap.groovy
 rename {src/main/groovy => grails-app/domain}/net/skytrail/ilcdb/domain/Role.groovy (59%)
 create mode 100644 grails-app/domain/net/skytrail/ilcdb/domain/ServiceRecord.groovy
 create mode 100644 grails-app/domain/net/skytrail/ilcdb/domain/Sponsor.groovy
 rename {src/main/groovy => grails-app/domain}/net/skytrail/ilcdb/domain/StatusAchieved.groovy (75%)
 create mode 100644 grails-app/domain/net/skytrail/ilcdb/domain/StatusType.groovy
 rename {src/main/groovy => grails-app/domain}/net/skytrail/ilcdb/domain/User.groovy (95%)
 rename {src/main/groovy => grails-app/domain}/net/skytrail/ilcdb/domain/UserRole.groovy (73%)
 delete mode 100644 src/main/groovy/net/skytrail/ilcdb/domain/Appointment.groovy
 delete mode 100644 src/main/groovy/net/skytrail/ilcdb/domain/BirthPlace.groovy
 delete mode 100644 src/main/groovy/net/skytrail/ilcdb/domain/CaseResult.groovy
 delete mode 100644 src/main/groovy/net/skytrail/ilcdb/domain/CaseType.groovy
 delete mode 100644 src/main/groovy/net/skytrail/ilcdb/domain/ClientSponsorRelation.groovy
 delete mode 100644 src/main/groovy/net/skytrail/ilcdb/domain/Conflict.groovy
 delete mode 100644 src/main/groovy/net/skytrail/ilcdb/domain/Country.groovy
 delete mode 100644 src/main/groovy/net/skytrail/ilcdb/domain/Requestmap.groovy
 delete mode 100644 src/main/groovy/net/skytrail/ilcdb/domain/ServiceRecord.groovy
 delete mode 100644 src/main/groovy/net/skytrail/ilcdb/domain/Sponsor.groovy
 delete mode 100644 src/main/groovy/net/skytrail/ilcdb/domain/StatusType.groovy

diff --git a/build.gradle b/build.gradle
index b0648a7..522aae5 100644
--- a/build.gradle
+++ b/build.gradle
@@ -5,8 +5,8 @@ buildscript {
     }
     dependencies {
         classpath "org.grails:grails-gradle-plugin:$grailsVersion"
-        classpath "org.springframework.boot:spring-boot-gradle-plugin:1.5.22.RELEASE"
-        classpath "com.bertramlabs.plugins:asset-pipeline-gradle:2.14.2"
+        classpath "org.springframework.boot:spring-boot-gradle-plugin:2.3.7.RELEASE"
+        classpath "com.bertramlabs.plugins:asset-pipeline-gradle:3.3.4"
     }
 }

@@ -32,50 +32,46 @@ dependencyManagement {

 dependencies {
     // Core Grails and Spring Boot
-    compile "org.springframework.boot:spring-boot-starter-logging"
-    compile "org.springframework.boot:spring-boot-autoconfigure"
-    provided "org.springframework.boot:spring-boot-starter-tomcat"
-    compile "org.grails:grails-core"
-    compile "org.grails:grails-web-boot"
-    compile "org.grails:grails-logging"
-
-    // Core plugins from BOM
-    compile "org.grails:grails-plugin-databinding"
-    compile "org.grails:grails-plugin-i18n"
-    compile "org.grails:grails-plugin-services"
-    compile "org.grails:grails-plugin-url-mappings"
-    compile "org.grails:grails-plugin-rest"
-    compile "org.grails.plugins:gsp"
-    compile "org.grails.plugins:scaffolding"
-    compile "org.grails.plugins:cache"
-    compile "org.grails.plugins:async"
+    implementation "org.springframework.boot:spring-boot-starter-logging"
+    implementation "org.springframework.boot:spring-boot-autoconfigure"
+    compileOnly "org.springframework.boot:spring-boot-starter-tomcat"
+    implementation "org.grails:grails-core"
+    implementation "org.grails:grails-web-boot"
+    implementation "org.grails:grails-logging"
+    implementation "org.grails:grails-plugin-databinding"
+    implementation "org.grails:grails-plugin-i18n"
+    implementation "org.grails:grails-plugin-services"
+    implementation "org.grails:grails-plugin-url-mappings"
+    implementation "org.grails:grails-plugin-rest"
+    implementation "org.grails.plugins:gsp"
+    implementation "org.grails.plugins:scaffolding"
+    implementation "org.grails.plugins:cache"
+    implementation "org.grails.plugins:async"

     // GORM / Hibernate
-    compile "org.grails.plugins:hibernate5"
-    compile "org.hibernate:hibernate-ehcache" // Version managed by BOM
+    implementation "org.grails:grails-gorm-hibernate5:$gormVersion"
+    implementation "org.hibernate:hibernate-ehcache"

     // Validation dependencies
-    compile 'org.hibernate:hibernate-validator:5.3.6.Final'
-    compile 'javax.el:javax.el-api:2.2.4'
-    compile 'org.glassfish:javax.el:3.0.1-b08'
+    implementation 'org.hibernate:hibernate-validator:6.1.5.Final'

     // Spring Security
-    compile 'org.grails.plugins:spring-security-core:3.2.3'
+    implementation 'org.grails.plugins:spring-security-core:4.0.3'

     // Third-party libraries
-    compile 'joda-time:joda-time:2.3'
-    runtime 'mysql:mysql-connector-java:8.0.28'
+    implementation 'joda-time:joda-time:2.3'
+    runtimeOnly 'mysql:mysql-connector-java:8.0.28'

     // Assets
     assets "org.webjars:jquery:3.3.1"
     assets "org.webjars:jquery-ui:1.12.1"

     // Testing
-    testCompile "org.grails:grails-gorm-testing-support"
-    testCompile "org.grails.plugins:geb"
-    testCompile "org.grails:grails-web-testing-support"
-    testRuntime "com.h2database:h2"
-    testRuntime "org.seleniumhq.selenium:selenium-htmlunit-driver:2.47.1"
+    testImplementation "org.grails:grails-gorm-testing-support"
+    testImplementation "org.grails.plugins:geb"
+    testImplementation "org.grails:grails-web-testing-support"
+    testRuntimeOnly "com.h2database:h2"
+    testRuntimeOnly "org.seleniumhq.selenium:selenium-htmlunit-driver:2.47.1"
 }

 assets {
diff --git a/gradle.properties b/gradle.properties
index 3779f91..b847002 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -1,3 +1,2 @@
-grailsVersion=3.3.18
-gormVersion=6.1.12.RELEASE
-gradleWrapperVersion=3.5
+grailsVersion=4.1.1
+gormVersion=7.1.0
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
index 36962c8..6528428 100644
--- a/gradle/wrapper/gradle-wrapper.properties
+++ b/gradle/wrapper/gradle-wrapper.properties
@@ -1,6 +1,6 @@
 distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-3.5-bin.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-6.9-bin.zip
 networkTimeout=10000
 validateDistributionUrl=true
 zipStoreBase=GRADLE_USER_HOME
diff --git a/grails-4.1.1-upgrade.patch b/grails-4.1.1-upgrade.patch
new file mode 100644
index 0000000..e69de29
diff --git a/grails-app/conf/Config.groovy b/grails-app/conf/Config.groovy
index d3c85f6..63d986c 100644
--- a/grails-app/conf/Config.groovy
+++ b/grails-app/conf/Config.groovy
@@ -110,28 +110,7 @@ grails.views.gsp.encoding="UTF-8"

 //log4j.logger.org.springframework.security='off,stdout'

-// Added by the Spring Security Core plugin:
-grails.plugin.springsecurity.userLookup.userDomainClassName = 'User'
-grails.plugin.springsecurity.userLookup.authorityJoinClassName = 'UserRole'
-grails.plugin.springsecurity.authority.className = 'Role'
-grails.plugin.springsecurity.password.algorithm = 'bcrypt'
-grails.plugin.springsecurity.failureHandler.exceptionMappings = [ 'org.springframework.security.authentication.CredentialsExpiredException': '/user/passwordExpired' ]
-grails.plugin.springsecurity.roleHierarchy = 'ROLE_ADMIN > ROLE_ATTORNEY > ROLE_STAFF > ROLE_VOLUNTEER > ROLE_INTERN'
-
-grails.plugin.springsecurity.ui.register.postResetUrl = '/reset'
-//grails.plugin.springsecurity.dao.reflectionSaltSourceProperty = 'username'
-grails.plugin.springsecurity.rejectIfNoRule = false
-grails.plugin.springsecurity.fii.rejectPublicInvocations = true
-grails.plugin.springsecurity.controllerAnnotations.staticRules = [
-    '/':               ['permitAll'],
-    '/register/**':     ['permitAll'],
-    '/index':          ['permitAll'],
-    '/index.gsp':      ['permitAll'],
-    '/**/js/**':       ['permitAll'],
-    '/**/css/**':      ['permitAll'],
-    '/**/images/**':   ['permitAll'],
-    '/**/favicon.ico': ['permitAll']
- ]
+// Spring Security settings are now managed in application.groovy

 rememberMe.tokenValiditySeconds = 43200 // 12 hours

diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/AMI.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/AMI.groovy
similarity index 99%
rename from src/main/groovy/net/skytrail/ilcdb/domain/AMI.groovy
rename to grails-app/domain/net/skytrail/ilcdb/domain/AMI.groovy
index eec249a..2ec7058 100644
--- a/src/main/groovy/net/skytrail/ilcdb/domain/AMI.groovy
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/AMI.groovy
@@ -24,6 +24,7 @@ import net.skytrail.ilcdb.domain.UserRole

 import grails.gorm.Entity;

+@Entity
 class AMI implements Entity{
     String label
     int level
diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/Address.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/Address.groovy
similarity index 62%
rename from src/main/groovy/net/skytrail/ilcdb/domain/Address.groovy
rename to grails-app/domain/net/skytrail/ilcdb/domain/Address.groovy
index f899d7e..006971c 100644
--- a/src/main/groovy/net/skytrail/ilcdb/domain/Address.groovy
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/Address.groovy
@@ -1,29 +1,9 @@
 package net.skytrail.ilcdb.domain;
-import net.skytrail.ilcdb.domain.AMI
-import net.skytrail.ilcdb.domain.Address
-import net.skytrail.ilcdb.domain.Appointment
-import net.skytrail.ilcdb.domain.BirthPlace
-import net.skytrail.ilcdb.domain.CaseResult
-import net.skytrail.ilcdb.domain.CaseType
-import net.skytrail.ilcdb.domain.Client
-import net.skytrail.ilcdb.domain.ClientCase
-import net.skytrail.ilcdb.domain.ClientSponsorRelation
-import net.skytrail.ilcdb.domain.Conflict
-import net.skytrail.ilcdb.domain.Country
-import net.skytrail.ilcdb.domain.Note
-import net.skytrail.ilcdb.domain.Person
-import net.skytrail.ilcdb.domain.Requestmap
-import net.skytrail.ilcdb.domain.Role
-import net.skytrail.ilcdb.domain.ServiceRecord
-import net.skytrail.ilcdb.domain.Sponsor
-import net.skytrail.ilcdb.domain.StatusAchieved
-import net.skytrail.ilcdb.domain.StatusType
-import net.skytrail.ilcdb.domain.User
-import net.skytrail.ilcdb.domain.UserRole
+import gorm.transform.Entity

-import grails.gorm.Entity;

-class Address implements Entity {
+@Entity
+class Address @Entity {
     String street
     String city
     String county
diff --git a/grails-app/domain/net/skytrail/ilcdb/domain/Appointment.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/Appointment.groovy
new file mode 100644
index 0000000..841d1ab
--- /dev/null
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/Appointment.groovy
@@ -0,0 +1,20 @@
+package net.skytrail.ilcdb.domain;
+import gorm.transform.Entity
+
+
+@Entity
+class Appointment @Entity {
+
+    Date date
+    String note
+
+    static mapping = {
+        cache true
+    }
+
+    static belongsTo = [ client:Client ]
+
+    String toString() {
+	return date
+    }
+}
diff --git a/grails-app/domain/net/skytrail/ilcdb/domain/BirthPlace.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/BirthPlace.groovy
new file mode 100644
index 0000000..23253a9
--- /dev/null
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/BirthPlace.groovy
@@ -0,0 +1,40 @@
+package net.skytrail.ilcdb.domain;
+import gorm.transform.Entity
+
+
+@Entity
+class BirthPlace @Entity {
+    String city
+    String state
+    Country country;
+
+    static mapping = {
+        cache true
+    }
+
+    static constraints =
+    {
+        city(blank:false)
+    }
+
+    def toMap() {
+        [city   : city,
+         state  : state,
+         country: country.name]
+    }
+
+    String toString()
+    {
+        def stringList = []
+
+        if(city != null && city.size() > 0 && !"NONE".equals(city.trim()))
+            stringList += city
+
+        if(state != null && state.size() > 0 && !"NONE".equals(state.trim()))
+            stringList += state
+
+        stringList += country.name
+
+        return stringList.join(', ')
+    }
+}
diff --git a/grails-app/domain/net/skytrail/ilcdb/domain/CaseResult.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/CaseResult.groovy
new file mode 100644
index 0000000..b649e28
--- /dev/null
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/CaseResult.groovy
@@ -0,0 +1,26 @@
+package net.skytrail.ilcdb.domain;
+import gorm.transform.Entity
+
+
+@Entity
+class CaseResult @Entity {
+    String result;
+    boolean successfulResult; // For client or ILCBC.
+    boolean statusWasAchieved; // An actual immigration status was successfully achieved.
+
+    def toMap() {
+        [result           : result,
+         successfulResult : successfulResult,
+         statusWasAchieved: statusWasAchieved]
+    }
+
+    static Collection<String> successfulResults()
+    {
+        return findAllWhere(successfulResult:true)
+    }
+
+    static Collection<String> statusWasAchieved()
+    {
+        return findAllWhere(statusWasAchieved:true)
+    }
+}
diff --git a/grails-app/domain/net/skytrail/ilcdb/domain/CaseType.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/CaseType.groovy
new file mode 100644
index 0000000..60ae100
--- /dev/null
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/CaseType.groovy
@@ -0,0 +1,31 @@
+package net.skytrail.ilcdb.domain;
+import gorm.transform.Entity
+
+
+@Entity
+class CaseType @Entity {
+    String type;
+    boolean deprecated = false;
+    String associatedStatus;
+
+    def toMap() {
+        [type: type,
+        associatedStatus: associatedStatus]
+    }
+
+    public boolean equals(Object other)
+    {
+        if (other instanceof CaseType) return id == ((CaseType)other).id
+        else return false
+    }
+
+    public int hashCode()
+    {
+        return id
+    }
+
+    public String toString()
+    {
+        return "${id} : ${type} : ${associatedStatus}"
+    }
+}
diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/Client.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/Client.groovy
similarity index 96%
rename from src/main/groovy/net/skytrail/ilcdb/domain/Client.groovy
rename to grails-app/domain/net/skytrail/ilcdb/domain/Client.groovy
index 7b6b243..20f6e5b 100644
--- a/src/main/groovy/net/skytrail/ilcdb/domain/Client.groovy
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/Client.groovy
@@ -1,32 +1,12 @@
 package net.skytrail.ilcdb.domain;
-import net.skytrail.ilcdb.domain.AMI
-import net.skytrail.ilcdb.domain.Address
-import net.skytrail.ilcdb.domain.Appointment
-import net.skytrail.ilcdb.domain.BirthPlace
-import net.skytrail.ilcdb.domain.CaseResult
-import net.skytrail.ilcdb.domain.CaseType
-import net.skytrail.ilcdb.domain.Client
-import net.skytrail.ilcdb.domain.ClientCase
-import net.skytrail.ilcdb.domain.ClientSponsorRelation
-import net.skytrail.ilcdb.domain.Conflict
-import net.skytrail.ilcdb.domain.Country
-import net.skytrail.ilcdb.domain.Note
-import net.skytrail.ilcdb.domain.Person
-import net.skytrail.ilcdb.domain.Requestmap
-import net.skytrail.ilcdb.domain.Role
-import net.skytrail.ilcdb.domain.ServiceRecord
-import net.skytrail.ilcdb.domain.Sponsor
-import net.skytrail.ilcdb.domain.StatusAchieved
-import net.skytrail.ilcdb.domain.StatusType
-import net.skytrail.ilcdb.domain.User
-import net.skytrail.ilcdb.domain.UserRole
+import gorm.transform.Entity

 import org.joda.time.format.DateTimeFormatter;
 import org.joda.time.format.DateTimeFormat;
 import org.joda.time.Interval
-import grails.gorm.Entity;

-class Client implements Comparable<Client>, Entity {
+@Entity
+class Client implements Comparable<Client> {
     static final long YEAR_IN_MILLIS = 365L*24L*60L*60L*1000L;
     private static final DateTimeFormatter briefDateFormat = DateTimeFormat.forPattern("MMM-dd-yyyy");

diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/ClientCase.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/ClientCase.groovy
similarity index 81%
rename from src/main/groovy/net/skytrail/ilcdb/domain/ClientCase.groovy
rename to grails-app/domain/net/skytrail/ilcdb/domain/ClientCase.groovy
index 683c1f4..09ff748 100644
--- a/src/main/groovy/net/skytrail/ilcdb/domain/ClientCase.groovy
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/ClientCase.groovy
@@ -1,31 +1,11 @@
 package net.skytrail.ilcdb.domain;
-import net.skytrail.ilcdb.domain.AMI
-import net.skytrail.ilcdb.domain.Address
-import net.skytrail.ilcdb.domain.Appointment
-import net.skytrail.ilcdb.domain.BirthPlace
-import net.skytrail.ilcdb.domain.CaseResult
-import net.skytrail.ilcdb.domain.CaseType
-import net.skytrail.ilcdb.domain.Client
-import net.skytrail.ilcdb.domain.ClientCase
-import net.skytrail.ilcdb.domain.ClientSponsorRelation
-import net.skytrail.ilcdb.domain.Conflict
-import net.skytrail.ilcdb.domain.Country
-import net.skytrail.ilcdb.domain.Note
-import net.skytrail.ilcdb.domain.Person
-import net.skytrail.ilcdb.domain.Requestmap
-import net.skytrail.ilcdb.domain.Role
-import net.skytrail.ilcdb.domain.ServiceRecord
-import net.skytrail.ilcdb.domain.Sponsor
-import net.skytrail.ilcdb.domain.StatusAchieved
-import net.skytrail.ilcdb.domain.StatusType
-import net.skytrail.ilcdb.domain.User
-import net.skytrail.ilcdb.domain.UserRole
+import gorm.transform.Entity

 import org.joda.time.format.DateTimeFormat
 import org.joda.time.format.DateTimeFormatter
-import grails.gorm.Entity;

-class ClientCase implements Comparable<ClientCase>, Entity {
+@Entity
+class ClientCase implements Comparable<ClientCase> {
     public static final String STAFF_ADVISE = "Staff Advise"
     public static final String STAFF_REPRESENTATION = "Staff Representation"
     private static final DateTimeFormatter briefDateFormat = DateTimeFormat.forPattern("MMM-dd-yyyy");
diff --git a/grails-app/domain/net/skytrail/ilcdb/domain/ClientSponsorRelation.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/ClientSponsorRelation.groovy
new file mode 100644
index 0000000..22a13df
--- /dev/null
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/ClientSponsorRelation.groovy
@@ -0,0 +1,13 @@
+package net.skytrail.ilcdb.domain;
+import gorm.transform.Entity
+
+
+@Entity
+class ClientSponsorRelation @Entity {
+
+    static mapping = {
+        cache true
+    }
+
+    static belongsTo = [ client:Client, sponsor:Sponsor ]
+}
diff --git a/grails-app/domain/net/skytrail/ilcdb/domain/Conflict.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/Conflict.groovy
new file mode 100644
index 0000000..c5f8ed7
--- /dev/null
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/Conflict.groovy
@@ -0,0 +1,35 @@
+package net.skytrail.ilcdb.domain;
+import gorm.transform.Entity
+
+
+@Entity
+class Conflict implements Comparable<Conflict> {
+    static mapping =
+    {
+        cache true
+    }
+
+    static belongsTo = [ client:Client ]
+
+    String firstName
+    String lastName
+    Date createDate
+    String reason
+
+    static constraints =
+    {
+    }
+
+    def toMap() {
+        [firstName : firstName,
+         lastName  : lastName,
+         createDate: createDate,
+         reason    : reason]
+    }
+
+    String toString() { return lastName + ", " + firstName }
+
+    int compareTo(Conflict o) {
+        return toString().compareTo(o.toString())
+    }
+}
diff --git a/grails-app/domain/net/skytrail/ilcdb/domain/Country.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/Country.groovy
new file mode 100644
index 0000000..016d3ca
--- /dev/null
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/Country.groovy
@@ -0,0 +1,13 @@
+package net.skytrail.ilcdb.domain;
+import gorm.transform.Entity
+
+
+@Entity
+class Country @Entity {
+    String name;
+
+    public String toString()
+    {
+        return name;
+    }
+}
diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/Note.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/Note.groovy
similarity index 59%
rename from src/main/groovy/net/skytrail/ilcdb/domain/Note.groovy
rename to grails-app/domain/net/skytrail/ilcdb/domain/Note.groovy
index f9681c9..afc2524 100644
--- a/src/main/groovy/net/skytrail/ilcdb/domain/Note.groovy
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/Note.groovy
@@ -1,31 +1,11 @@
 package net.skytrail.ilcdb.domain;
-import net.skytrail.ilcdb.domain.AMI
-import net.skytrail.ilcdb.domain.Address
-import net.skytrail.ilcdb.domain.Appointment
-import net.skytrail.ilcdb.domain.BirthPlace
-import net.skytrail.ilcdb.domain.CaseResult
-import net.skytrail.ilcdb.domain.CaseType
-import net.skytrail.ilcdb.domain.Client
-import net.skytrail.ilcdb.domain.ClientCase
-import net.skytrail.ilcdb.domain.ClientSponsorRelation
-import net.skytrail.ilcdb.domain.Conflict
-import net.skytrail.ilcdb.domain.Country
-import net.skytrail.ilcdb.domain.Note
-import net.skytrail.ilcdb.domain.Person
-import net.skytrail.ilcdb.domain.Requestmap
-import net.skytrail.ilcdb.domain.Role
-import net.skytrail.ilcdb.domain.ServiceRecord
-import net.skytrail.ilcdb.domain.Sponsor
-import net.skytrail.ilcdb.domain.StatusAchieved
-import net.skytrail.ilcdb.domain.StatusType
-import net.skytrail.ilcdb.domain.User
-import net.skytrail.ilcdb.domain.UserRole
+import gorm.transform.Entity

 import org.joda.time.format.DateTimeFormatter;
 import org.joda.time.format.DateTimeFormat;
-import grails.gorm.Entity;

-class Note implements Comparable<Note>, Entity
+@Entity
+class Note implements Comparable<Note>
 {
     private static final DateTimeFormatter briefDateFormat = DateTimeFormat.forPattern("MMM-dd-yyyy");

diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/Person.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/Person.groovy
similarity index 74%
rename from src/main/groovy/net/skytrail/ilcdb/domain/Person.groovy
rename to grails-app/domain/net/skytrail/ilcdb/domain/Person.groovy
index af273d0..6c5b8b5 100644
--- a/src/main/groovy/net/skytrail/ilcdb/domain/Person.groovy
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/Person.groovy
@@ -1,32 +1,11 @@
 package net.skytrail.ilcdb.domain;
-import net.skytrail.ilcdb.domain.AMI
-import net.skytrail.ilcdb.domain.Address
-import net.skytrail.ilcdb.domain.Appointment
-import net.skytrail.ilcdb.domain.BirthPlace
-import net.skytrail.ilcdb.domain.CaseResult
-import net.skytrail.ilcdb.domain.CaseType
-import net.skytrail.ilcdb.domain.Client
-import net.skytrail.ilcdb.domain.ClientCase
-import net.skytrail.ilcdb.domain.ClientSponsorRelation
-import net.skytrail.ilcdb.domain.Conflict
-import net.skytrail.ilcdb.domain.Country
-import net.skytrail.ilcdb.domain.Note
-import net.skytrail.ilcdb.domain.Person
-import net.skytrail.ilcdb.domain.Requestmap
-import net.skytrail.ilcdb.domain.Role
-import net.skytrail.ilcdb.domain.ServiceRecord
-import net.skytrail.ilcdb.domain.Sponsor
-import net.skytrail.ilcdb.domain.StatusAchieved
-import net.skytrail.ilcdb.domain.StatusType
-import net.skytrail.ilcdb.domain.User
-import net.skytrail.ilcdb.domain.UserRole
+import gorm.transform.Entity

 import java.text.SimpleDateFormat;
-import grails.gorm.Entity;

-import com.sun.corba.se.impl.oa.poa.POAPolicyMediatorImpl_R_USM.Etherealizer;

-class Person implements Comparable<Person>, Entity {
+@Entity
+class Person implements Comparable<Person> {
     Long id
     String firstName
     String lastName
diff --git a/grails-app/domain/net/skytrail/ilcdb/domain/Requestmap.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/Requestmap.groovy
new file mode 100644
index 0000000..4dec026
--- /dev/null
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/Requestmap.groovy
@@ -0,0 +1,22 @@
+package net.skytrail.ilcdb.domain;
+import gorm.transform.Entity
+
+
+/**
+ * Domain class for Request Map.
+ */
+@Entity
+class Requestmap @Entity {
+
+	String url
+	String configAttribute
+
+    static mapping = {
+        cache true
+    }
+
+	static constraints = {
+		url(blank: false, unique: true)
+		configAttribute(blank: false)
+	}
+}
diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/Role.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/Role.groovy
similarity index 59%
rename from src/main/groovy/net/skytrail/ilcdb/domain/Role.groovy
rename to grails-app/domain/net/skytrail/ilcdb/domain/Role.groovy
index 6c30edf..e45f912 100644
--- a/src/main/groovy/net/skytrail/ilcdb/domain/Role.groovy
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/Role.groovy
@@ -1,29 +1,9 @@
 package net.skytrail.ilcdb.domain;
-import net.skytrail.ilcdb.domain.AMI
-import net.skytrail.ilcdb.domain.Address
-import net.skytrail.ilcdb.domain.Appointment
-import net.skytrail.ilcdb.domain.BirthPlace
-import net.skytrail.ilcdb.domain.CaseResult
-import net.skytrail.ilcdb.domain.CaseType
-import net.skytrail.ilcdb.domain.Client
-import net.skytrail.ilcdb.domain.ClientCase
-import net.skytrail.ilcdb.domain.ClientSponsorRelation
-import net.skytrail.ilcdb.domain.Conflict
-import net.skytrail.ilcdb.domain.Country
-import net.skytrail.ilcdb.domain.Note
-import net.skytrail.ilcdb.domain.Person
-import net.skytrail.ilcdb.domain.Requestmap
-import net.skytrail.ilcdb.domain.Role
-import net.skytrail.ilcdb.domain.ServiceRecord
-import net.skytrail.ilcdb.domain.Sponsor
-import net.skytrail.ilcdb.domain.StatusAchieved
-import net.skytrail.ilcdb.domain.StatusType
-import net.skytrail.ilcdb.domain.User
-import net.skytrail.ilcdb.domain.UserRole
+import gorm.transform.Entity

-import grails.gorm.Entity;

-class Role implements Entity {
+@Entity
+class Role @Entity {
     public static enum RoleType
     {
         ROLE_ADMIN("Administrator"),
diff --git a/grails-app/domain/net/skytrail/ilcdb/domain/ServiceRecord.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/ServiceRecord.groovy
new file mode 100644
index 0000000..8fd36a6
--- /dev/null
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/ServiceRecord.groovy
@@ -0,0 +1,41 @@
+package net.skytrail.ilcdb.domain;
+import gorm.transform.Entity
+
+import java.util.Date;
+import java.text.SimpleDateFormat;
+
+public class ServiceRecord implements Comparable<ServiceRecord> {
+    static mapping = {
+        cache true
+    }
+
+    static belongsTo = [ client:Client ]
+
+    Date serviceDate;
+    double serviceHours;
+
+    static transients = ["serviceDateString"]
+
+    def toMap() {
+        [serviceDate : serviceDate,
+         serviceHours: serviceHours]
+    }
+
+    String getServiceDateString()
+    {
+        if (serviceDate instanceof Date)
+            return (new SimpleDateFormat("yyyy-MM-dd").format(serviceDate));
+        return "";
+    }
+
+    int compareTo(obj)
+    {
+        serviceDate.compareTo(obj.serviceDate)
+    }
+
+    public String toString()
+    {
+        String sd = new SimpleDateFormat("yyyy-MM-dd").format(serviceDate);
+        return "${sd}: ${serviceHours} hours";
+    }
+}
diff --git a/grails-app/domain/net/skytrail/ilcdb/domain/Sponsor.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/Sponsor.groovy
new file mode 100644
index 0000000..2087b2c
--- /dev/null
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/Sponsor.groovy
@@ -0,0 +1,34 @@
+package net.skytrail.ilcdb.domain;
+import gorm.transform.Entity
+
+
+@Entity
+class Sponsor @Entity {
+
+    static mapping = {
+        cache true
+    }
+
+    static hasMany = [clientRelations:ClientSponsorRelation]
+    Person sponsor
+    String income
+
+    static constraints = {
+
+        income(inList:[
+            'Less than $10,000',
+            '$10,000 - $20,000',
+            '$20,000 - $30,000',
+            '$30,000 - $40,000',
+            '$40,000 - $50,000',
+            '$50,000 - $60,000',
+            '$60,000 - $70,000',
+            '$70,000 - $80,000',
+            '$80,000 - $90,000',
+            '$90,000 - $100,000',
+            'Greater than $100,000',
+        ])
+    }
+
+    String toString() { return sponsor.toString() }
+}
diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/StatusAchieved.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/StatusAchieved.groovy
similarity index 75%
rename from src/main/groovy/net/skytrail/ilcdb/domain/StatusAchieved.groovy
rename to grails-app/domain/net/skytrail/ilcdb/domain/StatusAchieved.groovy
index eb8fca9..0509e63 100644
--- a/src/main/groovy/net/skytrail/ilcdb/domain/StatusAchieved.groovy
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/StatusAchieved.groovy
@@ -1,31 +1,10 @@
 package net.skytrail.ilcdb.domain;
-import net.skytrail.ilcdb.domain.AMI
-import net.skytrail.ilcdb.domain.Address
-import net.skytrail.ilcdb.domain.Appointment
-import net.skytrail.ilcdb.domain.BirthPlace
-import net.skytrail.ilcdb.domain.CaseResult
-import net.skytrail.ilcdb.domain.CaseType
-import net.skytrail.ilcdb.domain.Client
-import net.skytrail.ilcdb.domain.ClientCase
-import net.skytrail.ilcdb.domain.ClientSponsorRelation
-import net.skytrail.ilcdb.domain.Conflict
-import net.skytrail.ilcdb.domain.Country
-import net.skytrail.ilcdb.domain.Note
-import net.skytrail.ilcdb.domain.Person
-import net.skytrail.ilcdb.domain.Requestmap
-import net.skytrail.ilcdb.domain.Role
-import net.skytrail.ilcdb.domain.ServiceRecord
-import net.skytrail.ilcdb.domain.Sponsor
-import net.skytrail.ilcdb.domain.StatusAchieved
-import net.skytrail.ilcdb.domain.StatusType
-import net.skytrail.ilcdb.domain.User
-import net.skytrail.ilcdb.domain.UserRole
+import gorm.transform.Entity

-import sun.nio.cs.ext.IBM918
 import java.text.SimpleDateFormat
-import grails.gorm.Entity;

-class StatusAchieved implements Entity {
+@Entity
+class StatusAchieved @Entity {
     static belongsTo = [ client:Client ]

     enum Type {
diff --git a/grails-app/domain/net/skytrail/ilcdb/domain/StatusType.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/StatusType.groovy
new file mode 100644
index 0000000..eac54ff
--- /dev/null
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/StatusType.groovy
@@ -0,0 +1,15 @@
+package net.skytrail.ilcdb.domain;
+import gorm.transform.Entity
+
+
+public enum StatusType @Entity {
+    DACA("Deferred Action", "daca"), LPR("Legal Permanent Resident", "lpr"), TPS("Temporary Protected Status", "tps"), CITIZEN("Citizen", "citizen")
+
+    private final String description
+    private final String datePickerWidgetPrefix
+
+    private StatusType(String description, String datePickerWidgetPrefix) {
+        this.description = description
+        this.datePickerWidgetPrefix = datePickerWidgetPrefix
+    }
+}
diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/User.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/User.groovy
similarity index 95%
rename from src/main/groovy/net/skytrail/ilcdb/domain/User.groovy
rename to grails-app/domain/net/skytrail/ilcdb/domain/User.groovy
index d7a3cba..11aec35 100644
--- a/src/main/groovy/net/skytrail/ilcdb/domain/User.groovy
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/User.groovy
@@ -1,8 +1,9 @@
 package net.skytrail.ilcdb.domain;
+import gorm.transform.Entity

-import grails.gorm.Entity

-class User implements Entity {
+@Entity
+class User @Entity {
 //    def springSecurityService // Dependency injection for the springSecurityService.

     String username
diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/UserRole.groovy b/grails-app/domain/net/skytrail/ilcdb/domain/UserRole.groovy
similarity index 73%
rename from src/main/groovy/net/skytrail/ilcdb/domain/UserRole.groovy
rename to grails-app/domain/net/skytrail/ilcdb/domain/UserRole.groovy
index fe55b34..9cffe73 100644
--- a/src/main/groovy/net/skytrail/ilcdb/domain/UserRole.groovy
+++ b/grails-app/domain/net/skytrail/ilcdb/domain/UserRole.groovy
@@ -1,10 +1,11 @@
 package net.skytrail.ilcdb.domain
+import gorm.transform.Entity

-import grails.gorm.Entity
 import org.hibernate.annotations.Immutable

 @Immutable
-class UserRole implements Serializable, Entity {
+@Entity
+class UserRole implements Serializable {

     User user
     Role role
diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/Appointment.groovy b/src/main/groovy/net/skytrail/ilcdb/domain/Appointment.groovy
deleted file mode 100644
index dd6dded..0000000
--- a/src/main/groovy/net/skytrail/ilcdb/domain/Appointment.groovy
+++ /dev/null
@@ -1,40 +0,0 @@
-package net.skytrail.ilcdb.domain;
-import net.skytrail.ilcdb.domain.AMI
-import net.skytrail.ilcdb.domain.Address
-import net.skytrail.ilcdb.domain.Appointment
-import net.skytrail.ilcdb.domain.BirthPlace
-import net.skytrail.ilcdb.domain.CaseResult
-import net.skytrail.ilcdb.domain.CaseType
-import net.skytrail.ilcdb.domain.Client
-import net.skytrail.ilcdb.domain.ClientCase
-import net.skytrail.ilcdb.domain.ClientSponsorRelation
-import net.skytrail.ilcdb.domain.Conflict
-import net.skytrail.ilcdb.domain.Country
-import net.skytrail.ilcdb.domain.Note
-import net.skytrail.ilcdb.domain.Person
-import net.skytrail.ilcdb.domain.Requestmap
-import net.skytrail.ilcdb.domain.Role
-import net.skytrail.ilcdb.domain.ServiceRecord
-import net.skytrail.ilcdb.domain.Sponsor
-import net.skytrail.ilcdb.domain.StatusAchieved
-import net.skytrail.ilcdb.domain.StatusType
-import net.skytrail.ilcdb.domain.User
-import net.skytrail.ilcdb.domain.UserRole
-
-import grails.gorm.Entity;
-
-class Appointment implements Entity {
-
-    Date date
-    String note
-
-    static mapping = {
-        cache true
-    }
-
-    static belongsTo = [ client:Client ]
-
-    String toString() {
-	return date
-    }
-}
diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/BirthPlace.groovy b/src/main/groovy/net/skytrail/ilcdb/domain/BirthPlace.groovy
deleted file mode 100644
index a89f01e..0000000
--- a/src/main/groovy/net/skytrail/ilcdb/domain/BirthPlace.groovy
+++ /dev/null
@@ -1,60 +0,0 @@
-package net.skytrail.ilcdb.domain;
-import net.skytrail.ilcdb.domain.AMI
-import net.skytrail.ilcdb.domain.Address
-import net.skytrail.ilcdb.domain.Appointment
-import net.skytrail.ilcdb.domain.BirthPlace
-import net.skytrail.ilcdb.domain.CaseResult
-import net.skytrail.ilcdb.domain.CaseType
-import net.skytrail.ilcdb.domain.Client
-import net.skytrail.ilcdb.domain.ClientCase
-import net.skytrail.ilcdb.domain.ClientSponsorRelation
-import net.skytrail.ilcdb.domain.Conflict
-import net.skytrail.ilcdb.domain.Country
-import net.skytrail.ilcdb.domain.Note
-import net.skytrail.ilcdb.domain.Person
-import net.skytrail.ilcdb.domain.Requestmap
-import net.skytrail.ilcdb.domain.Role
-import net.skytrail.ilcdb.domain.ServiceRecord
-import net.skytrail.ilcdb.domain.Sponsor
-import net.skytrail.ilcdb.domain.StatusAchieved
-import net.skytrail.ilcdb.domain.StatusType
-import net.skytrail.ilcdb.domain.User
-import net.skytrail.ilcdb.domain.UserRole
-
-import grails.gorm.Entity;
-
-class BirthPlace implements Entity {
-    String city
-    String state
-    Country country;
-
-    static mapping = {
-        cache true
-    }
-
-    static constraints =
-    {
-        city(blank:false)
-    }
-
-    def toMap() {
-        [city   : city,
-         state  : state,
-         country: country.name]
-    }
-
-    String toString()
-    {
-        def stringList = []
-
-        if(city != null && city.size() > 0 && !"NONE".equals(city.trim()))
-            stringList += city
-
-        if(state != null && state.size() > 0 && !"NONE".equals(state.trim()))
-            stringList += state
-
-        stringList += country.name
-
-        return stringList.join(', ')
-    }
-}
diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/CaseResult.groovy b/src/main/groovy/net/skytrail/ilcdb/domain/CaseResult.groovy
deleted file mode 100644
index de97494..0000000
--- a/src/main/groovy/net/skytrail/ilcdb/domain/CaseResult.groovy
+++ /dev/null
@@ -1,46 +0,0 @@
-package net.skytrail.ilcdb.domain;
-import net.skytrail.ilcdb.domain.AMI
-import net.skytrail.ilcdb.domain.Address
-import net.skytrail.ilcdb.domain.Appointment
-import net.skytrail.ilcdb.domain.BirthPlace
-import net.skytrail.ilcdb.domain.CaseResult
-import net.skytrail.ilcdb.domain.CaseType
-import net.skytrail.ilcdb.domain.Client
-import net.skytrail.ilcdb.domain.ClientCase
-import net.skytrail.ilcdb.domain.ClientSponsorRelation
-import net.skytrail.ilcdb.domain.Conflict
-import net.skytrail.ilcdb.domain.Country
-import net.skytrail.ilcdb.domain.Note
-import net.skytrail.ilcdb.domain.Person
-import net.skytrail.ilcdb.domain.Requestmap
-import net.skytrail.ilcdb.domain.Role
-import net.skytrail.ilcdb.domain.ServiceRecord
-import net.skytrail.ilcdb.domain.Sponsor
-import net.skytrail.ilcdb.domain.StatusAchieved
-import net.skytrail.ilcdb.domain.StatusType
-import net.skytrail.ilcdb.domain.User
-import net.skytrail.ilcdb.domain.UserRole
-
-import grails.gorm.Entity;
-
-class CaseResult implements Entity {
-    String result;
-    boolean successfulResult; // For client or ILCBC.
-    boolean statusWasAchieved; // An actual immigration status was successfully achieved.
-
-    def toMap() {
-        [result           : result,
-         successfulResult : successfulResult,
-         statusWasAchieved: statusWasAchieved]
-    }
-
-    static Collection<String> successfulResults()
-    {
-        return findAllWhere(successfulResult:true)
-    }
-
-    static Collection<String> statusWasAchieved()
-    {
-        return findAllWhere(statusWasAchieved:true)
-    }
-}
diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/CaseType.groovy b/src/main/groovy/net/skytrail/ilcdb/domain/CaseType.groovy
deleted file mode 100644
index 561c49b..0000000
--- a/src/main/groovy/net/skytrail/ilcdb/domain/CaseType.groovy
+++ /dev/null
@@ -1,51 +0,0 @@
-package net.skytrail.ilcdb.domain;
-import net.skytrail.ilcdb.domain.AMI
-import net.skytrail.ilcdb.domain.Address
-import net.skytrail.ilcdb.domain.Appointment
-import net.skytrail.ilcdb.domain.BirthPlace
-import net.skytrail.ilcdb.domain.CaseResult
-import net.skytrail.ilcdb.domain.CaseType
-import net.skytrail.ilcdb.domain.Client
-import net.skytrail.ilcdb.domain.ClientCase
-import net.skytrail.ilcdb.domain.ClientSponsorRelation
-import net.skytrail.ilcdb.domain.Conflict
-import net.skytrail.ilcdb.domain.Country
-import net.skytrail.ilcdb.domain.Note
-import net.skytrail.ilcdb.domain.Person
-import net.skytrail.ilcdb.domain.Requestmap
-import net.skytrail.ilcdb.domain.Role
-import net.skytrail.ilcdb.domain.ServiceRecord
-import net.skytrail.ilcdb.domain.Sponsor
-import net.skytrail.ilcdb.domain.StatusAchieved
-import net.skytrail.ilcdb.domain.StatusType
-import net.skytrail.ilcdb.domain.User
-import net.skytrail.ilcdb.domain.UserRole
-
-import grails.gorm.Entity;
-
-class CaseType implements Entity {
-    String type;
-    boolean deprecated = false;
-    String associatedStatus;
-
-    def toMap() {
-        [type: type,
-        associatedStatus: associatedStatus]
-    }
-
-    public boolean equals(Object other)
-    {
-        if (other instanceof CaseType) return id == ((CaseType)other).id
-        else return false
-    }
-
-    public int hashCode()
-    {
-        return id
-    }
-
-    public String toString()
-    {
-        return "${id} : ${type} : ${associatedStatus}"
-    }
-}
diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/ClientSponsorRelation.groovy b/src/main/groovy/net/skytrail/ilcdb/domain/ClientSponsorRelation.groovy
deleted file mode 100644
index a3137ab..0000000
--- a/src/main/groovy/net/skytrail/ilcdb/domain/ClientSponsorRelation.groovy
+++ /dev/null
@@ -1,33 +0,0 @@
-package net.skytrail.ilcdb.domain;
-import net.skytrail.ilcdb.domain.AMI
-import net.skytrail.ilcdb.domain.Address
-import net.skytrail.ilcdb.domain.Appointment
-import net.skytrail.ilcdb.domain.BirthPlace
-import net.skytrail.ilcdb.domain.CaseResult
-import net.skytrail.ilcdb.domain.CaseType
-import net.skytrail.ilcdb.domain.Client
-import net.skytrail.ilcdb.domain.ClientCase
-import net.skytrail.ilcdb.domain.ClientSponsorRelation
-import net.skytrail.ilcdb.domain.Conflict
-import net.skytrail.ilcdb.domain.Country
-import net.skytrail.ilcdb.domain.Note
-import net.skytrail.ilcdb.domain.Person
-import net.skytrail.ilcdb.domain.Requestmap
-import net.skytrail.ilcdb.domain.Role
-import net.skytrail.ilcdb.domain.ServiceRecord
-import net.skytrail.ilcdb.domain.Sponsor
-import net.skytrail.ilcdb.domain.StatusAchieved
-import net.skytrail.ilcdb.domain.StatusType
-import net.skytrail.ilcdb.domain.User
-import net.skytrail.ilcdb.domain.UserRole
-
-import grails.gorm.Entity;
-
-class ClientSponsorRelation implements Entity {
-
-    static mapping = {
-        cache true
-    }
-
-    static belongsTo = [ client:Client, sponsor:Sponsor ]
-}
diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/Conflict.groovy b/src/main/groovy/net/skytrail/ilcdb/domain/Conflict.groovy
deleted file mode 100644
index 96ffbad..0000000
--- a/src/main/groovy/net/skytrail/ilcdb/domain/Conflict.groovy
+++ /dev/null
@@ -1,55 +0,0 @@
-package net.skytrail.ilcdb.domain;
-import net.skytrail.ilcdb.domain.AMI
-import net.skytrail.ilcdb.domain.Address
-import net.skytrail.ilcdb.domain.Appointment
-import net.skytrail.ilcdb.domain.BirthPlace
-import net.skytrail.ilcdb.domain.CaseResult
-import net.skytrail.ilcdb.domain.CaseType
-import net.skytrail.ilcdb.domain.Client
-import net.skytrail.ilcdb.domain.ClientCase
-import net.skytrail.ilcdb.domain.ClientSponsorRelation
-import net.skytrail.ilcdb.domain.Conflict
-import net.skytrail.ilcdb.domain.Country
-import net.skytrail.ilcdb.domain.Note
-import net.skytrail.ilcdb.domain.Person
-import net.skytrail.ilcdb.domain.Requestmap
-import net.skytrail.ilcdb.domain.Role
-import net.skytrail.ilcdb.domain.ServiceRecord
-import net.skytrail.ilcdb.domain.Sponsor
-import net.skytrail.ilcdb.domain.StatusAchieved
-import net.skytrail.ilcdb.domain.StatusType
-import net.skytrail.ilcdb.domain.User
-import net.skytrail.ilcdb.domain.UserRole
-
-import grails.gorm.Entity;
-
-class Conflict implements Comparable<Conflict>, Entity {
-    static mapping =
-    {
-        cache true
-    }
-
-    static belongsTo = [ client:Client ]
-
-    String firstName
-    String lastName
-    Date createDate
-    String reason
-
-    static constraints =
-    {
-    }
-
-    def toMap() {
-        [firstName : firstName,
-         lastName  : lastName,
-         createDate: createDate,
-         reason    : reason]
-    }
-
-    String toString() { return lastName + ", " + firstName }
-
-    int compareTo(Conflict o) {
-        return toString().compareTo(o.toString())
-    }
-}
diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/Country.groovy b/src/main/groovy/net/skytrail/ilcdb/domain/Country.groovy
deleted file mode 100644
index 1d24336..0000000
--- a/src/main/groovy/net/skytrail/ilcdb/domain/Country.groovy
+++ /dev/null
@@ -1,33 +0,0 @@
-package net.skytrail.ilcdb.domain;
-import net.skytrail.ilcdb.domain.AMI
-import net.skytrail.ilcdb.domain.Address
-import net.skytrail.ilcdb.domain.Appointment
-import net.skytrail.ilcdb.domain.BirthPlace
-import net.skytrail.ilcdb.domain.CaseResult
-import net.skytrail.ilcdb.domain.CaseType
-import net.skytrail.ilcdb.domain.Client
-import net.skytrail.ilcdb.domain.ClientCase
-import net.skytrail.ilcdb.domain.ClientSponsorRelation
-import net.skytrail.ilcdb.domain.Conflict
-import net.skytrail.ilcdb.domain.Country
-import net.skytrail.ilcdb.domain.Note
-import net.skytrail.ilcdb.domain.Person
-import net.skytrail.ilcdb.domain.Requestmap
-import net.skytrail.ilcdb.domain.Role
-import net.skytrail.ilcdb.domain.ServiceRecord
-import net.skytrail.ilcdb.domain.Sponsor
-import net.skytrail.ilcdb.domain.StatusAchieved
-import net.skytrail.ilcdb.domain.StatusType
-import net.skytrail.ilcdb.domain.User
-import net.skytrail.ilcdb.domain.UserRole
-
-import grails.gorm.Entity;
-
-class Country implements Entity {
-    String name;
-
-    public String toString()
-    {
-        return name;
-    }
-}
diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/Requestmap.groovy b/src/main/groovy/net/skytrail/ilcdb/domain/Requestmap.groovy
deleted file mode 100644
index 0d728b8..0000000
--- a/src/main/groovy/net/skytrail/ilcdb/domain/Requestmap.groovy
+++ /dev/null
@@ -1,42 +0,0 @@
-package net.skytrail.ilcdb.domain;
-import net.skytrail.ilcdb.domain.AMI
-import net.skytrail.ilcdb.domain.Address
-import net.skytrail.ilcdb.domain.Appointment
-import net.skytrail.ilcdb.domain.BirthPlace
-import net.skytrail.ilcdb.domain.CaseResult
-import net.skytrail.ilcdb.domain.CaseType
-import net.skytrail.ilcdb.domain.Client
-import net.skytrail.ilcdb.domain.ClientCase
-import net.skytrail.ilcdb.domain.ClientSponsorRelation
-import net.skytrail.ilcdb.domain.Conflict
-import net.skytrail.ilcdb.domain.Country
-import net.skytrail.ilcdb.domain.Note
-import net.skytrail.ilcdb.domain.Person
-import net.skytrail.ilcdb.domain.Requestmap
-import net.skytrail.ilcdb.domain.Role
-import net.skytrail.ilcdb.domain.ServiceRecord
-import net.skytrail.ilcdb.domain.Sponsor
-import net.skytrail.ilcdb.domain.StatusAchieved
-import net.skytrail.ilcdb.domain.StatusType
-import net.skytrail.ilcdb.domain.User
-import net.skytrail.ilcdb.domain.UserRole
-
-import grails.gorm.Entity;
-
-/**
- * Domain class for Request Map.
- */
-class Requestmap implements Entity {
-
-	String url
-	String configAttribute
-
-    static mapping = {
-        cache true
-    }
-
-	static constraints = {
-		url(blank: false, unique: true)
-		configAttribute(blank: false)
-	}
-}
diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/ServiceRecord.groovy b/src/main/groovy/net/skytrail/ilcdb/domain/ServiceRecord.groovy
deleted file mode 100644
index 8274d95..0000000
--- a/src/main/groovy/net/skytrail/ilcdb/domain/ServiceRecord.groovy
+++ /dev/null
@@ -1,62 +0,0 @@
-package net.skytrail.ilcdb.domain;
-import net.skytrail.ilcdb.domain.AMI
-import net.skytrail.ilcdb.domain.Address
-import net.skytrail.ilcdb.domain.Appointment
-import net.skytrail.ilcdb.domain.BirthPlace
-import net.skytrail.ilcdb.domain.CaseResult
-import net.skytrail.ilcdb.domain.CaseType
-import net.skytrail.ilcdb.domain.Client
-import net.skytrail.ilcdb.domain.ClientCase
-import net.skytrail.ilcdb.domain.ClientSponsorRelation
-import net.skytrail.ilcdb.domain.Conflict
-import net.skytrail.ilcdb.domain.Country
-import net.skytrail.ilcdb.domain.Note
-import net.skytrail.ilcdb.domain.Person
-import net.skytrail.ilcdb.domain.Requestmap
-import net.skytrail.ilcdb.domain.Role
-import net.skytrail.ilcdb.domain.ServiceRecord
-import net.skytrail.ilcdb.domain.Sponsor
-import net.skytrail.ilcdb.domain.StatusAchieved
-import net.skytrail.ilcdb.domain.StatusType
-import net.skytrail.ilcdb.domain.User
-import net.skytrail.ilcdb.domain.UserRole
-
-import java.util.Date;
-import java.text.SimpleDateFormat;
-import grails.gorm.Entity;
-
-public class ServiceRecord implements Comparable<ServiceRecord>, Entity {
-    static mapping = {
-        cache true
-    }
-
-    static belongsTo = [ client:Client ]
-
-    Date serviceDate;
-    double serviceHours;
-
-    static transients = ["serviceDateString"]
-
-    def toMap() {
-        [serviceDate : serviceDate,
-         serviceHours: serviceHours]
-    }
-
-    String getServiceDateString()
-    {
-        if (serviceDate instanceof Date)
-            return (new SimpleDateFormat("yyyy-MM-dd").format(serviceDate));
-        return "";
-    }
-
-    int compareTo(obj)
-    {
-        serviceDate.compareTo(obj.serviceDate)
-    }
-
-    public String toString()
-    {
-        String sd = new SimpleDateFormat("yyyy-MM-dd").format(serviceDate);
-        return "${sd}: ${serviceHours} hours";
-    }
-}
diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/Sponsor.groovy b/src/main/groovy/net/skytrail/ilcdb/domain/Sponsor.groovy
deleted file mode 100644
index a887474..0000000
--- a/src/main/groovy/net/skytrail/ilcdb/domain/Sponsor.groovy
+++ /dev/null
@@ -1,54 +0,0 @@
-package net.skytrail.ilcdb.domain;
-import net.skytrail.ilcdb.domain.AMI
-import net.skytrail.ilcdb.domain.Address
-import net.skytrail.ilcdb.domain.Appointment
-import net.skytrail.ilcdb.domain.BirthPlace
-import net.skytrail.ilcdb.domain.CaseResult
-import net.skytrail.ilcdb.domain.CaseType
-import net.skytrail.ilcdb.domain.Client
-import net.skytrail.ilcdb.domain.ClientCase
-import net.skytrail.ilcdb.domain.ClientSponsorRelation
-import net.skytrail.ilcdb.domain.Conflict
-import net.skytrail.ilcdb.domain.Country
-import net.skytrail.ilcdb.domain.Note
-import net.skytrail.ilcdb.domain.Person
-import net.skytrail.ilcdb.domain.Requestmap
-import net.skytrail.ilcdb.domain.Role
-import net.skytrail.ilcdb.domain.ServiceRecord
-import net.skytrail.ilcdb.domain.Sponsor
-import net.skytrail.ilcdb.domain.StatusAchieved
-import net.skytrail.ilcdb.domain.StatusType
-import net.skytrail.ilcdb.domain.User
-import net.skytrail.ilcdb.domain.UserRole
-
-import grails.gorm.Entity;
-
-class Sponsor implements Entity {
-
-    static mapping = {
-        cache true
-    }
-
-    static hasMany = [clientRelations:ClientSponsorRelation]
-    Person sponsor
-    String income
-
-    static constraints = {
-
-        income(inList:[
-            'Less than $10,000',
-            '$10,000 - $20,000',
-            '$20,000 - $30,000',
-            '$30,000 - $40,000',
-            '$40,000 - $50,000',
-            '$50,000 - $60,000',
-            '$60,000 - $70,000',
-            '$70,000 - $80,000',
-            '$80,000 - $90,000',
-            '$90,000 - $100,000',
-            'Greater than $100,000',
-        ])
-    }
-
-    String toString() { return sponsor.toString() }
-}
diff --git a/src/main/groovy/net/skytrail/ilcdb/domain/StatusType.groovy b/src/main/groovy/net/skytrail/ilcdb/domain/StatusType.groovy
deleted file mode 100644
index 14531ed..0000000
--- a/src/main/groovy/net/skytrail/ilcdb/domain/StatusType.groovy
+++ /dev/null
@@ -1,36 +0,0 @@
-package net.skytrail.ilcdb.domain;
-import net.skytrail.ilcdb.domain.AMI
-import net.skytrail.ilcdb.domain.Address
-import net.skytrail.ilcdb.domain.Appointment
-import net.skytrail.ilcdb.domain.BirthPlace
-import net.skytrail.ilcdb.domain.CaseResult
-import net.skytrail.ilcdb.domain.CaseType
-import net.skytrail.ilcdb.domain.Client
-import net.skytrail.ilcdb.domain.ClientCase
-import net.skytrail.ilcdb.domain.ClientSponsorRelation
-import net.skytrail.ilcdb.domain.Conflict
-import net.skytrail.ilcdb.domain.Country
-import net.skytrail.ilcdb.domain.Note
-import net.skytrail.ilcdb.domain.Person
-import net.skytrail.ilcdb.domain.Requestmap
-import net.skytrail.ilcdb.domain.Role
-import net.skytrail.ilcdb.domain.ServiceRecord
-import net.skytrail.ilcdb.domain.Sponsor
-import net.skytrail.ilcdb.domain.StatusAchieved
-import net.skytrail.ilcdb.domain.StatusType
-import net.skytrail.ilcdb.domain.User
-import net.skytrail.ilcdb.domain.UserRole
-
-import grails.gorm.Entity;
-
-public enum StatusType implements Entity {
-    DACA("Deferred Action", "daca"), LPR("Legal Permanent Resident", "lpr"), TPS("Temporary Protected Status", "tps"), CITIZEN("Citizen", "citizen")
-
-    private final String description
-    private final String datePickerWidgetPrefix
-
-    private StatusType(String description, String datePickerWidgetPrefix) {
-        this.description = description
-        this.datePickerWidgetPrefix = datePickerWidgetPrefix
-    }
-}
diff --git a/src/main/groovy/net/skytrail/ilcdb/service/ClientService.groovy b/src/main/groovy/net/skytrail/ilcdb/service/ClientService.groovy
index 0e46bfc..eba053f 100644
--- a/src/main/groovy/net/skytrail/ilcdb/service/ClientService.groovy
+++ b/src/main/groovy/net/skytrail/ilcdb/service/ClientService.groovy
@@ -21,7 +21,7 @@ import net.skytrail.ilcdb.domain.StatusType
 import net.skytrail.ilcdb.domain.User
 import net.skytrail.ilcdb.domain.UserRole

-import grails.transaction.Transactional
+import grails.gorm.transactions.Transactional
 import org.joda.time.Interval

 @Transactional
--
2.50.1
